!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="dist/",n(n.s=2)}([function(e,t){e.exports=THREE},function(e,t){e.exports=TWEEN},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(1),a=n.n(r);function i(e,t,n,o){return{x:e/n*2-1,y:-t/o*2+1}}function s(e){var t=e.target.getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=f(e);if(t){var r=f(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(n,e);var t=l(n);function n(e,r,a){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),m(h(s=t.call(this)),"activate",(function(){s.domElement.addEventListener("mousemove",s.onDocumentMouseMove,!1),s.domElement.addEventListener("mousedown",s.onDocumentMouseDown,!1),s.domElement.addEventListener("mouseup",s.onDocumentMouseCancel,!1),s.domElement.addEventListener("mouseleave",s.onDocumentMouseCancel,!1),s.domElement.addEventListener("touchmove",s.onDocumentTouchMove,!1),s.domElement.addEventListener("touchstart",s.onDocumentTouchStart,!1),s.domElement.addEventListener("touchend",s.onDocumentTouchEnd,!1)})),m(h(s),"deactivate",(function(){s.domElement.removeEventListener("mousemove",s.onDocumentMouseMove,!1),s.domElement.removeEventListener("mousedown",s.onDocumentMouseDown,!1),s.domElement.removeEventListener("mouseup",s.onDocumentMouseCancel,!1),s.domElement.removeEventListener("mouseleave",s.onDocumentMouseCancel,!1),s.domElement.removeEventListener("touchmove",s.onDocumentTouchMove,!1),s.domElement.removeEventListener("touchstart",s.onDocumentTouchStart,!1),s.domElement.removeEventListener("touchend",s.onDocumentTouchEnd,!1)})),m(h(s),"onDocumentMouseMove",(function(e){if(e.preventDefault(),s._handleCursorMove(e.clientX,e.clientY),!s.isDragging){s.raycaster.setFromCamera(s.mouse,s.camera);var t=s.raycaster.intersectObjects(s.object.children);if(t.length>0){var n=t[0].object;s.plane.setFromNormalAndCoplanarPoint(s.camera.getWorldDirection(s.plane.normal),n.parent.position),s.hovered!==n&&(s.dispatchEvent({type:"hoveron",object:n}),s.domElement.style.cursor="pointer",s.hovered=n)}else null!==s.hovered&&(s.dispatchEvent({type:"hoveroff",object:s.hovered}),s.domElement.style.cursor="auto",s.hovered=null)}})),m(h(s),"onDocumentMouseDown",(function(e){e.preventDefault(),s.raycaster.setFromCamera(s.mouse,s.camera);var t=s.raycaster.intersectObjects(s.object.children);t.length>0&&(s.selected=t[0].object,s.raycaster.ray.intersectPlane(s.plane,s.intersection)&&s.offset.copy(s.intersection).sub(s.selected.parent.position),s.domElement.style.cursor="move",s.isDragging=!0,s.dispatchEvent({type:"dragstart",object:s.selected}))})),m(h(s),"onDocumentMouseCancel",(function(e){e.preventDefault(),s.selected&&(s.dispatchEvent({type:"dragend",object:s.selected}),s.selected=null),s.isDragging=!1,s.domElement.style.cursor="auto"})),m(h(s),"onDocumentTouchMove",(function(e){e.preventDefault(),e=e.changedTouches[0],s._handleCursorMove(e.clientX,e.clientY)})),m(h(s),"onDocumentTouchStart",(function(e){e.preventDefault(),e=e.changedTouches[0];var t=s.domElement.getBoundingClientRect(),n=i(e.clientX-t.left,e.clientY-t.top,t.width,t.height);s.mouse.x=n.x,s.mouse.y=n.y,s.raycaster.setFromCamera(s.mouse,s.camera);var o=s.raycaster.intersectObjects(s.object.children);o.length>0&&(s.selected=o[0].object,s.plane.setFromNormalAndCoplanarPoint(s.camera.getWorldDirection(s.plane.normal),s.selected.parent.position),s.raycaster.ray.intersectPlane(s.plane,s.intersection)&&s.offset.copy(s.intersection).sub(s.selected.parent.position),s.domElement.style.cursor="move",s.isDragging=!0,s.dispatchEvent({type:"dragstart",object:s.selected}))})),m(h(s),"onDocumentTouchEnd",(function(e){e.preventDefault(),s.selected&&(s.dispatchEvent({type:"dragend",object:s.selected}),s.selected=null),s.isDragging=!1,s.domElement.style.cursor="auto"})),m(h(s),"_handleCursorMove",(function(e,t){var n=s.domElement.getBoundingClientRect(),o=i(e-n.left,t-n.top,n.width,n.height);if(s.mouse.x=o.x,s.mouse.y=o.y,s.raycaster.setFromCamera(s.mouse,s.camera),s.selected&&s.enabled){if(s.raycaster.ray.intersectPlane(s.plane,s.intersection)){var r=s.intersection.sub(s.offset),a=(n.width+n.left)/2,c=(n.height+n.top)/2,u=Math.abs(r.x),l=Math.abs(r.y);u>.4*a&&(r.x=r.x/u*.4*a),l>.4*c&&(r.y=r.y/l*.4*c),s.selected.parent.position.copy(r)}s.dispatchEvent({type:"drag",object:s.selected})}})),s.object=e,s.camera=r,s.domElement=a,s.plane=new o.Plane,s.raycaster=new o.Raycaster,s.mouse=new o.Vector2,s.offset=new o.Vector3,s.intersection=new o.Vector3,s.selected=null,s.hovered=null,s.isDragging=!1,s.enabled=!0,s.activate(),s}return n}(o.EventDispatcher),y=15647149,p=2892331,w=16756064,g=14900586,M=16579836,b=591878,E=6139362,z=5812956,D="[THREE Glasses]",_="[THREE Avatar]",P="[THREE Scene]";function L(){}function S(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T=function e(){var t=this,n=this,r=this,i=this,s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),x(this,"act",S((function(){return n.isDizzy?n._nextAction=n.stopDizzy:n._nextAction=Math.random()<.7?n.blink:n.confuse,e=function(){if(null!=n._nextAction)return function(e){if(e&&e.then)return e.then(L)}(function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}((function(){return function(e,t){if(!t)return e&&e.then?e.then(L):Promise.resolve()}(n._nextAction.call())}),(function(e){console.error(e.message)})))},t=function(){n.act()},(o=e())&&o.then?o.then(t):t(o);var e,t,o}))),x(this,"blink",S((function(){var e=new a.a.Tween(r.normalEyes.scale);return new Promise((function(t){e.to({y:.01},70).repeat(1).yoyo(!0).onUpdate((function(){r.isDizzy?(r.iris.scale.y=1,t()):r.iris.scale.y=r.normalEyes.scale.y})).onComplete((function(){setTimeout(t,1e3+2e3*Math.random())})).start()})).then((function(){return e.stop()}))}))),x(this,"confuse",S((function(){var e={mouthX:1,mouthY:1,eyeY:1},t=new a.a.Tween(e);return new Promise((function(n){t.to({mouthX:2,mouthY:.3,eyeY:.35},100).repeat(1).delay(1e3+2e3*Math.random()).yoyo(!0).onUpdate((function(){i.isDizzy?(i.normalEyes.scale.y=1,i.iris.scale.y=1,n()):(i.normalEyes.scale.y=e.eyeY,i.iris.scale.y=e.eyeY,i.mouth.scale.x=e.mouthX,i.mouth.scale.y=e.mouthY)})).onComplete((function(){setTimeout(n,2e3+2e3*Math.random())})).start()})).then((function(){return t.stop()}))}))),x(this,"lookAt",(function(e){var n=t._constrainHeadRotation(e);t.oldTargetLookPos||(t.oldTargetLookPos=new o.Vector3),t.newTargetLookPos=n.clone(),t.lookPos=t.oldTargetLookPos.clone().add(t.newTargetLookPos.sub(t.oldTargetLookPos).multiplyScalar(.15)),t.mesh.lookAt(t.lookPos),t.oldTargetLookPos=t.lookPos})),x(this,"isWearingGlasses",(function(){return!!t.mesh.getObjectByName(D)})),x(this,"wearGlasses",(function(e){e instanceof o.Object3D&&e.name===D&&(t.mesh.add(e),e.position.set(0,5,32))})),x(this,"prepareToBeDizzy",(function(){t._dizzyCircle||(t._dizzyCircle=new o.CircleGeometry(35,100),t._dizzyCircle.applyMatrix4((new o.Matrix4).makeTranslation(0,-50,-100)),t._dizzyCircle.applyMatrix4((new o.Matrix4).makeRotationX(Math.PI))),t._dizzyFrame=1,t._toggleDizzyFace()})),x(this,"dizzy",(function(){t.isDizzy&&t._dizzyCircle&&(t._dizzyFrame>100&&(t._dizzyFrame=1),t.mesh.lookAt(t._dizzyCircle.vertices[t._dizzyFrame++]))})),x(this,"stopDizzy",S((function(){return new Promise((function(e){setTimeout((function(){s._dizzyCircle=null,s._toggleDizzyFace(),e()}),6e3)}))}))),x(this,"_toggleDizzyFace",(function(e){t.isDizzy=!t.isDizzy,t.dizzyEyes.visible=t.isDizzy,t.normalEyes.visible=!t.isDizzy,t.iris.visible=!t.isDizzy;var n=t.isDizzy?.7:1,o=t.isDizzy?2:1;t.mouth.scale.set(n,o,1)})),x(this,"_constrainHeadRotation",(function(e){var t=Math.PI/5;return e.x>t?e.x=t:e.x<-t&&(e.x=-t),e.y>t?e.y=t:e.y<-t&&(e.y=-t),e})),x(this,"_createHead",(function(){var e=new o.BoxBufferGeometry(60,56,54),n=new o.MeshPhongMaterial({color:y,flatShading:o.FlatShading});t.head=new o.Mesh(e,n),t.head.receiveShadow=!0,t.mesh.add(t.head)})),x(this,"_createNormalEyes",(function(){var e=new o.BoxBufferGeometry(20,20,1),n=new o.MeshLambertMaterial({color:M}),r=new o.Mesh(e,n);r.position.x=18;var a=r.clone();a.position.x=-18,t.normalEyes=new o.Object3D,t.normalEyes.position.set(0,6,28),t.normalEyes.add(r),t.normalEyes.add(a),t.mesh.add(t.normalEyes)})),x(this,"_createDizzyEyes",(function(){var e=new o.PlaneBufferGeometry(14,3,1,1),n=new o.MeshLambertMaterial({color:b}),r=new o.Mesh(e,n),a=r.clone(),i=r.clone(),s=r.clone();r.rotation.z=Math.PI/4,a.rotation.z=-Math.PI/4,i.rotation.z=Math.PI/4,s.rotation.z=-Math.PI/4;var c=new o.Object3D,u=c.clone();c.add(r),c.add(a),u.add(i),u.add(s),c.position.set(17,0,0),u.position.set(-17,0,0),t.dizzyEyes=new o.Object3D,t.dizzyEyes.position.set(0,6,28),t.dizzyEyes.add(c),t.dizzyEyes.add(u),t.dizzyEyes.visible=!1,t.mesh.add(t.dizzyEyes)})),x(this,"_createIris",(function(){var e=new o.BoxBufferGeometry(5,5,1),n=new o.MeshLambertMaterial({color:b}),r=new o.Mesh(e,n);r.position.set(15,0,0);var a=r.clone();a.position.set(-15,0,0),t.iris=new o.Object3D,t.iris.position.set(0,6,30),t.iris.add(r),t.iris.add(a),t.mesh.add(t.iris)})),x(this,"_createNose",(function(){var e=new o.Geometry;e.vertices=[new o.Vector3(0,0,10),new o.Vector3(-7,0,0),new o.Vector3(0,18,0),new o.Vector3(7,0,0)],e.faces=[new o.Face3(0,1,3),new o.Face3(2,1,0),new o.Face3(0,3,2)];var n=new o.MeshPhongMaterial({color:w,flatShading:o.FlatShading});t.nose=new o.Mesh(e,n),t.nose.position.set(0,-8,26),t.nose.castShadow=!0,t.nose.receiveShadow=!0,t.mesh.add(t.nose)})),x(this,"_createMouth",(function(){var e=new o.PlaneBufferGeometry(6,4,1,1),n=new o.MeshLambertMaterial({color:g});t.mouth=new o.Mesh(e,n),t.mouth.position.set(0,-20,28),t.mesh.add(t.mouth)})),x(this,"_createEars",(function(){var e=new o.BoxBufferGeometry(4,18,12),n=new o.MeshPhongMaterial({color:y,flatShading:o.FlatShading}),r=new o.Mesh(e,n);r.position.set(33,0,0),r.rotation.y=-Math.PI/6,r.castShadow=!0,r.receiveShadow=!0;var a=r.clone();a.position.set(-33,0,0),a.rotation.y=Math.PI/6,a.castShadow=!0,a.receiveShadow=!0,t.ears=new o.Object3D,t.ears.add(r),t.ears.add(a),t.ears.position.set(0,5,-5),t.mesh.add(t.ears)})),x(this,"_createHair",(function(){var e=new o.BoxBufferGeometry(16,18,15),n=new o.MeshLambertMaterial({color:p}),r=new o.Mesh(e,n);r.geometry.applyMatrix4((new o.Matrix4).makeTranslation(0,9,0)),t.hairs=new o.Object3D,t.hairTop=new o.Object3D;for(var a=Math.PI/2,i=0;i<16;i++){var s=r.clone(),c=i%4,u=Math.floor(i/4);s.position.set(16*u-24,0,15*c-22),a=1===u?Math.PI/3:2===u?Math.PI/2.5:Math.PI/2,s.scale.y=1*Math.cos(c/3)/Math.sin(a),t.hairTop.add(s)}t.hairTop.position.y+=28,t.hairs.add(t.hairTop),t.hairSide=new o.Object3D;var l=(new o.Matrix4).set(1,0,0,0,0,1,.2,0,0,0,1,0,0,0,0,1),d=new o.BoxBufferGeometry(4,36,32),h=new o.Mesh(d.applyMatrix4(l),n),f=h.clone();h.position.set(-30,0,0),f.position.set(30,0,0),t.hairSide.add(f),t.hairSide.add(h),t.hairSide.position.set(0,18,-10),t.hairs.add(t.hairSide);var m=new o.BoxBufferGeometry(64,62,10);t.hairBack=new o.Mesh(m,n),t.hairBack.position.set(0,15,-25),t.hairs.add(t.hairBack),t.hairs.traverse((function(e){e instanceof o.Mesh&&(e.castShadow=!0,e.receiveShadow=!0)})),t.mesh.add(t.hairs)})),this.mesh=new o.Object3D,this.mesh.name=_,this.isDizzy=!1,this.isLookingAround=!0,this._nextAction=null,this._createHead(),this._createNormalEyes(),this._createDizzyEyes(),this._createIris(),this._createNose(),this._createMouth(),this._createEars(),this._createHair()};var j=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mesh=new o.Object3D,this.mesh.name=D;var t=new o.TorusBufferGeometry(16,2,16,4),n=new o.MeshPhongMaterial({color:E,flatShading:!0}),r=new o.Mesh(t,n);r.rotation.z=Math.PI/4;var a=r.clone();r.position.x=18,a.position.x=-18,this.mesh.add(r),this.mesh.add(a);var i=new o.TorusBufferGeometry(10,1.2,16,4,Math.PI/2),s=new o.Mesh(i,n);s.rotation.z=Math.PI/4,this.mesh.add(s);var c=new o.BoxBufferGeometry(3,3,40),u=new o.MeshPhongMaterial({color:E}),l=new o.Mesh(c,u),d=l.clone();l.position.set(32,10,-19),d.position.set(-32,10,-19),this.mesh.add(l),this.mesh.add(d),this.mesh.traverse((function(e){e instanceof o.Mesh&&(e.castShadow=!0)}));var h=new o.PlaneBufferGeometry(24,24,1,1),f=new o.MeshPhongMaterial({transparent:!0,color:z,opacity:.1}),m=new o.Mesh(h,f),v=m.clone();m.position.x=18,v.position.x=-18,this.mesh.add(m),this.mesh.add(v)};function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=R(e);if(t){var r=R(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return A(this,n)}}function A(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?B(e):t}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(n,e);var t=k(n);function n(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),G(B(e=t.call(this)),"createScene",(function(){var t=e.deviceWidth/e.deviceHeight;e.scene=new o.Scene,e.camera=new o.PerspectiveCamera(60,t,.1,2e3),e.camera.position.z=420,e.scene.add(e.camera),e.renderer=new o.WebGLRenderer({alpha:!0,antialias:!0}),e.renderer.setSize(e.deviceWidth,e.deviceHeight),e.renderer.shadowMap.enabled=!0,e.container.appendChild(e.renderer.domElement),e.container.addEventListener("mousemove",e._handleMouseMove,!1),e.container.addEventListener("mouseover",e._handleMouseEnterAndOut,!1),e.container.addEventListener("mouseout",e._handleMouseEnterAndOut,!1),e.container.addEventListener("touchmove",e._handleTouchMove,!1),e.container.addEventListener("touchstart",e._handleTouchStartAndEnd,!1),e.container.addEventListener("touchend",e._handleTouchStartAndEnd,!1),window.addEventListener("resize",e._handleWindowResize,!1)})),G(B(e),"createLight",(function(){var t=new o.HemisphereLight(15658734,11184810,.8),n=new o.DirectionalLight(16777215,.4);n.position.set(150,350,350),n.castShadow=!0,n.shadow.camera.left=-200,n.shadow.camera.right=200,n.shadow.camera.top=200,n.shadow.camera.bottom=-200,n.shadow.camera.near=1,n.shadow.camera.far=1e3,n.shadow.mapSize.width=2048,n.shadow.mapSize.height=2048,e.scene.add(t),e.scene.add(n)})),G(B(e),"createAvatar",(function(){e.avatar=new T,e.scene.add(e.avatar.mesh)})),G(B(e),"createGlasses",(function(){e.glasses=new j,e.scene.add(e.glasses.mesh),e.glasses.mesh.position.set(0,-100,80),e.avatar.wearGlasses(e.glasses.mesh),e.dragControls=new v(e.glasses.mesh,e.camera,e.renderer.domElement),e.dragControls.addEventListener("dragstart",(function(t){e.scene.add(e.glasses.mesh),e.glasses.mesh.position.z=80,e.dispatchEvent({type:"glassesoff"})})),e.dragControls.addEventListener("drag",(function(t){e.glasses.mesh.position.z=80})),e.dragControls.addEventListener("dragend",(function(t){var n=e.glasses.mesh.position;Math.abs(n.x)<20&&Math.abs(n.y)<=20&&(e.avatar.wearGlasses(e.glasses.mesh),!e.avatar.isDizzy&&e.avatar.isWearingGlasses()&&e.dispatchEvent({type:"glasseson"}))}))})),G(B(e),"setAvatarLookAround",(function(t){t?null===e._lookAroundInterval&&(e._lookAroundInterval=setInterval((function(){e.mouseVector.set((Math.random()>.5?.5:-.5)*Math.random(),(Math.random()>.5?.3:-.4)*Math.random(),.5)}),5e3)):null!==e._lookAroundInterval&&(clearInterval(e._lookAroundInterval),e._lookAroundInterval=null)})),G(B(e),"loop",(function(){e.setAvatarLookAround(e.avatar.isLookingAround),e.avatar.isDizzy?(e.avatar.dizzy(),e.avatar.isLookingAround&&e.mouseVector.set(0,0,.5)):(e.avatar.isWearingGlasses()&&e.dispatchEvent({type:"glasseson"}),e.avatar.lookAt(e.mouseVector)),e.animate()})),G(B(e),"animate",(function(){window.requestAnimationFrame(e.loop),a.a.update(),e.renderer.render(e.scene,e.camera)})),G(B(e),"_handleMouseMove",(function(t){t.preventDefault();var n=s(t);e._updateMouseVector(n.x,n.y)})),G(B(e),"_handleMouseEnterAndOut",(function(t){t.preventDefault(),e.avatar.isLookingAround="mouseout"===t.type})),G(B(e),"_handleTouchMove",(function(t){t.preventDefault();var n=s(t=t.changedTouches[0]);e._updateMouseVector(n.x,n.y)})),G(B(e),"_handleTouchStartAndEnd",(function(t){t.preventDefault(),e.avatar.isLookingAround="touchend"===t.type})),G(B(e),"_handleWindowResize",(function(){e.deviceWidth=e.container.clientWidth,e.deviceHeight=e.container.clientHeight,e.camera.aspect=e.deviceWidth/e.deviceHeight,e.camera.updateProjectionMatrix(),e.renderer.setSize(e.deviceWidth,e.deviceHeight)})),G(B(e),"_updateMouseVector",(function(t,n){var o=i(t,n,e.deviceWidth,e.deviceHeight);e.mouseVector.setX(o.x),e.mouseVector.setY(o.y)})),G(B(e),"_trackMouseSpeed",(function(){var t,n=-1,o=-1,r=0,a=!1;e.container.addEventListener("mousemove",(function(e){e.preventDefault(),a=!!e.touches,i(e.clientX,e.clientY)}),!1),e.container.addEventListener("touchmove",(function(e){e.preventDefault(),a=!!e.touches,e=e.changedTouches[0],i(e.clientX,e.clientY)}),!1);var i=function(t,a){var i,s;n>-1&&!e.avatar.isDizzy&&(r+=(i={x:t,y:a},s={x:n,y:o},Math.sqrt(Math.pow(i.x-s.x,2)+Math.pow(i.y-s.y,2)))),n=t,o=a};setTimeout((function n(){var o=Date.now();if(t&&t!==o){var i=a?3500:5e3;!e.avatar.isDizzy&&r>i&&e.avatar.prepareToBeDizzy(),r=0}t=o,setTimeout(n,1200)}),1200)})),e.name=P,e.container=document.querySelector(".world"),e.deviceWidth=e.container.clientWidth,e.deviceHeight=e.container.clientHeight,e.mouseVector=new o.Vector3(0,0,.5),e._lookAroundInterval=null,e.createScene(),e.createLight(),e.createAvatar(),e.createGlasses(),e._trackMouseSpeed(),e.avatar.act(),e}return n}(o.EventDispatcher);document.addEventListener("DOMContentLoaded",(function(){var e=new I,t=document.querySelector(".intro"),n=document.querySelector(".tooltips");!function(e,t){var n=0,o="",r=!1;!function a(){var i=t[n],s=200-100*Math.random();o=r?i.substring(0,o.length-1):i.substring(0,o.length+1),e.innerHTML="<span>".concat(o,"</span>"),r&&(s/=2),r||o!==i?r&&""===o&&(r=!1,n=n===t.length-1?0:n+1,s=500):(r=!0,s=1500),setTimeout((function(){a()}),s)}()}(document.querySelector(".hobby"),["watching movies.","drawing.","football.","playing RPG games.","coding!"]),e.addEventListener("glassesoff",(function(e){t.classList.add("blur")}),!1),e.addEventListener("glasseson",(function(e){t.classList.remove("blur")}),!1),n.addEventListener("touchstart",(function(e){e.preventDefault(),n.classList.contains("hover")?n.classList.remove("hover"):n.classList.add("hover")}),!1),document.addEventListener("touchstart",(function(e){e.preventDefault(),e.target!==n&&n.classList.contains("hover")&&n.classList.remove("hover")}),!1),e.loop()}),!1)}]);